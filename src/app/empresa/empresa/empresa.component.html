<mat-card>

    <mat-card-title>Empresa</mat-card-title> <br>
    <mat-divider></mat-divider><br>    
    
    <mat-card-content>
        <div class="input-row" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="20px" fxLayoutGap.lt-md="0px">
            <mat-card-subtitle fxFlex="100">
                <ol class="breadcrumb mb-4">
                    <li class="breadcrumb-item active"> Dados da Empresa </li>
                </ol>
            </mat-card-subtitle>
        </div>

        <div *ngIf="empresa.logoTipo">
            <span class="spacer"></span>
            <img width="100" height="100" src="data:image/jpg;base64,{{ empresa.logoTipo }}"
                (click)="visualizarFoto($event)">
        </div>  
    
<br> <mat-divider></mat-divider><br>
        <form fxLayout="column" [formGroup]="formulario" (ngSubmit)="Submit()">


            <div class="input-row" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="20px" fxLayoutGap.lt-md="0px"
                *ngIf="formulario.controls.id.value">

                <div *ngIf="!empresa.logoTipo" fxFlex="15">

                    <mat-label>Logo</mat-label><br>
                    <input type="file" formControlName="logoTipo" (change)="uploadLogo($event, empresa)">
                    <br><br>
                </div>

               

            </div>   
                          
            <div class="input-row" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="20px" fxLayoutGap.lt-md="0px">

                <mat-form-field class="full-width" fxFlex="40">
                    <mat-label>Razão social</mat-label>
                    <input matInput formControlName="razaoSocial">
                </mat-form-field>

                <mat-form-field fxFlex="40">
                    <mat-label>Nome Fantasia </mat-label>
                    <input matInput formControlName="nomeFantasia">
                </mat-form-field>

                <mat-form-field fxFlex="20">
                    <mat-label>CNPJ</mat-label>
                    <input matInput formControlName="cnpj" [textMask]="{mask: mascaraCnpj, guide: false}">
                </mat-form-field>

            </div>

            <div class="input-row" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="20px" fxLayoutGap.lt-md="0px">

                <mat-form-field fxFlex="20">
                    <mat-label>Inscrição Estadual</mat-label>
                    <input matInput formControlName="inscricaoEstadual">
                </mat-form-field>

                <mat-form-field fxFlex="20">
                    <mat-label>Inscrição Municiapal</mat-label>
                    <input matInput formControlName="inscricaoMunicipal">
                </mat-form-field>

                <mat-form-field fxFlex="40">
                    <mat-label>Área de Atuação</mat-label>
                    <input matInput formControlName="areaAtuacao">
                </mat-form-field>

                <mat-form-field fxFlex="10">
                    <mat-label>Celular :</mat-label>
                    <input matInput formControlName="celular" [textMask]="{mask: mascaraCelular, guide: false}"
                        name="celular">
                </mat-form-field>

                <mat-form-field fxFlex="10">
                    <mat-label>Telefone :</mat-label>
                    <input matInput formControlName="telefone" [textMask]="{mask: mascaraTelefoneFixo, guide: false}"
                        name="telefone">
                </mat-form-field>

            </div>
            <div class="input-row" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="20px" fxLayoutGap.lt-md="0px">

                <mat-form-field fxFlex="12">
                    <mat-label>CEP :</mat-label>
                    <input matInput formControlName="cep" placeholder="CEP:" (keyup)="buscarCep($event)">
                </mat-form-field>


                <mat-form-field fxFlex="45">
                    <mat-label>Bairro :</mat-label>
                    <input matInput formControlName="bairro" placeholder="Endereço:">
                </mat-form-field>

                <mat-form-field fxFlex="45">
                    <mat-label>Endereço :</mat-label>
                    <input matInput formControlName="endereco" placeholder="Endereço:">
                </mat-form-field>



            </div>

            <div class="input-row" fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="20px" fxLayoutGap.lt-md="0px">

                <mat-form-field fxFlex="30">
                    <mat-label>Cidade :</mat-label>
                    <input matInput formControlName="cidade" placeholder="Cidade :">
                </mat-form-field>

                <mat-form-field fxFlex="12">
                    <mat-label>Estado :</mat-label>
                    <input matInput formControlName="estado" placeholder="Estado :">
                </mat-form-field>


                <mat-form-field fxFlex="12">
                    <mat-label>Nº :</mat-label>
                    <input matInput formControlName="numero" placeholder="Complemento:">
                </mat-form-field>

                <mat-form-field fxFlex="30">
                    <mat-label>Email:</mat-label>
                    <input matInput formControlName="email" placeholder="Email:">
                    <mat-error *ngIf="formulario.controls.email.errors && !formulario.controls.email.pristine">
                        <mat-error *ngIf="formulario.controls.email.errors.email">
                            Email inválido
                        </mat-error>
                    </mat-error>
                </mat-form-field>
            </div>
            <div fxLayout="row" fxLayout.lt-md="column" fxLayoutGap="50px" fxLayoutGap.lt-md="0px">

                <mat-spinner [diameter]="30" *ngIf="progress"> </mat-spinner>
                <button mat-stroked-button [disabled]="formulario.invalid" type="submit"
                    *ngIf="!formulario.controls.id.value && !progress" color="primary">
                    <mat-icon>save</mat-icon>
                    Cadastrar
                </button>

                <button mat-stroked-button *ngIf="formulario.controls.id.value && !progress"
                    (click)="atualizaEmpresa($event)" [disabled]="formulario.invalid" color="primary">
                    <mat-icon>refresh</mat-icon>
                    Atualizar
                </button>
            </div>
        </form>
    </mat-card-content>

</mat-card>